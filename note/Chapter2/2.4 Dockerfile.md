# 2.4.1 이미지를 생성하는 방법

> 개발한 애플리케이션을 컨테이너화할 때 가장 먼저 생각나는 방법은 아래와 같습니다.
> 
> 1. 아무것도 존재하지 않는 이미지(우분투, CentOS 등)로 컨테이너를 생성
> 2. 애플리케이션을 위한 환경을 설치하고, 소스코드 등을 복사해 잘 동작하는 것을 확인
> 3. 컨테이너를 이미지로 커밋(commit)

![그림 2.54](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F4KwxR%2Fbtq99nTDvzv%2FhjpG62oSy1kBaF6LVmdxok%2Fimg.png)

> 이 방법을 사용하면 애플리케이션이 동작하는 환경을 구성하기 위해 **일일이 수작업으로 패키지를 설치하고 소스코드를 Git에서 복제하거나 호스트에서 복사해야 합니다.** 물론 직접 컨테이너에서 애플리케이션을 구동해보고 이미지로 커밋하기 때문에 이미지의 동작을 보장할 수 있다는 점도 있습니다.

![그림 2.55](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcjHEhC%2FbtradSdLP9y%2FONv22oZe3SbuxH70AUP611%2Fimg.png)

> 도커는 위와 같은 일련의 과정을 손쉽게 기록하고 수행할 수 있는 `빌드(build)` 명령어를 제공합니다. 
> 완성된 이미지를 생성하기 위해 컨테이너에 설치해야 하는 패키지, 추가해야 하는 소스코드, 실행해야 하는 명령어와 셸 스크립트 등을 **하나의 파일에 기록해 두면** 도커는 이 파일을 읽어 `컨테이너에서 작업을 수행한 뒤` 이미지로 만들어냅니다.

>[!NOTE]
> 이와 같이 Dockerfile을 사용하는 이유는 이미지를 생성하는 방법을 기록하는 것뿐만 아니라 이미지의 빌드, 배포 측면에서도 매우 유리합니다. 애플리케이션에 필요한 패키지 설치 등을 명확히 할 수 있고 이미지 생성을 자동화 할 수 있으며, 쉽게 배포할 수 있기 때문입니다.

>[!tip]
>애플리케이션을 배포할 때 이미지 자체를 배포하는 대신 이미지를 생성하는 방법을 기록해 놓은 Dockerfile을 배포할 때도 있습니다. 
>배포되는 이미지를 신뢰할 수 없거나 직접 이미지를 생성해서 사용하고 싶다면 도커 허브에 올려져 있는 Dockerfile로 빌드하는 것도 하나의 방법입니다.


