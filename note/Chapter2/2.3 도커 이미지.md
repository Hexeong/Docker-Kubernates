> [!info]
> 모든 컨테이너는 이미지를 기반으로 생성되므로 이미지를 다루는 방법은 도커 관리에서 빼놓을 수 없는 부분입니다. 이미지의 이름을 구성하는 저장소, 이미지 이름, 태그를 잘 관리하는 것 뿐만 아니라 이미지가 어떻게 생성되고 삭제되는지, 이미지의 구조는 어떻게 돼 있는지 등을 아는 것 또한 중요합니다. 이번 장에서는 이미지를 관리하는 기본적인 방법을 살펴보겠습니다.

> 도커는 기본적으로 `도커 허브(Docker Hub)`라는 `중앙 이미지 저장소`에서 이미지를 내려받습니다. 도커 허브는 도커가 공식적으로 제공하고 있는 이미지 저장소로서, 도커 계정을 갖고 있다면 `누구든지` 이미지를 올리고 내려받을 수 있기 때문에 다른 사람들에게 이미지를 쉽게 공유할 수 있습니다.

>[!important]
>단, 도커 허브는 누구나 이미지를 올릴 수 있기 때문에 공식(Official) 라벨이 없는 이미지는 사용법을 찾을 수 없거나 제대로 동작하지 않을 수 있습니다.
>또한 이미지 저장소를 다른 사람들에게 공개하지 않기 위해 비공개(Private) 저장소를 사용하려면 비공개 저장소의 수에 따라 요금을 지불해야 합니다. 
>이를 해결하기 위해 도커 이미지 저장소를 직접 구축해 비공개로 사용할 수도 있다는 점을 알아두시면 좋겠습니다.

>[!tip]
>도커 허브에 어떤 이미지가 있는지 확인하기 위해 도커 허브 사이트를 직접 접속해서 찾아볼 수 있지만, 도커 엔진에서 docker search 명령어를 사용할 수도 있습니다.

>[!tip]
>docker search 명령어는 도커 허브에서 이미지를 검색하며, 도커 허브 이미지임을 명시하기 위해 docker.io/ubuntu와 같이 docker.io 접두어를 사용할 수도 있습니다. 이는 다른 이미지 저장소와 구분하기 위함입니다.

# 2.3.1 도커 이미지 생성

>[!info]
>앞에서처럼 `docker search`를 통해 검색한 이미지를 pull 명령어로 내려받아 사용할 수도 있지만 도커로 개발하는 많은 경우에는 컨테이너에 애플리케이션을 위한 특정 개발 환경을 직접 구축한 뒤 사용자만의 이미지를 직접 생성해야 할 것입니다. 이를 위해 컨테이너 안에서 작업한 내용을 이미지로 만드는 방법을 먼저 설명하겠습니다.

```docker
다음 명령어를 입력해 이미지로 만들 컨테이너를 생성합니다. 컨테이너 내부에 first라는 이름의 파일을 하나 생성해 기존의 이미지로부터 변경하상을 만듭니다.

# docker run -i -t --name commit_test ubuntu:14.04
root@09a6f0f4cb0d:/# echo test_first >> first

first라는 파일을 만들어 ubuntu:14.04 이미지로부터 변경 사항을 만들었다면 컨테이너에서 호스트로 빠져나와 docker commit 명령어를 입력해 컨테이너를 이미지로 만듭니다. docker commit 명령어의 형식은 아래와 같습니다. 먼저 commit의 옵션을 지정하고 커밋할 컨테이너의 이름을 명시한 뒤 생성될 이미지의 이름을 입력합니다.

# docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]

다음 명령은 commit_test라는 컨테이너를 commit_test:first라는 이름의 이미지로 생성합니다.

# docker commit \
-a "Hexeong" -m "my first commit" \
commit_test \
commit_test:first

-a 옵션은 author를 뜻하며, 이미지의 작성자를 나타내는 메타데이터를 이미지에 포함시킵니다.
-m 옵션은 커밋 메세지를 뜻하며, 이미지에 포함될 부가 설명을 입력합니다.
```